import{N as y}from"./NumberPagination-9c1fe51f.js";import{u as $}from"./datetime-87f6df03.js";import{u as V}from"./user-12dc24db.js";import{_ as E}from"./plugin-vue_export-helper-c27b6911.js";import{V as b}from"./VContainer-5b7520f1.js";import{V as u}from"./VCol-c72717e7.js";import{V as A}from"./forwardRefs-601a00f7.js";import{V as h}from"./VRow-93a26ab0.js";import{V as D}from"./VTable-fd753445.js";import{r as _,o as p,c as R,w as o,g as H,a as s,b as d,t as r,d as a,e as g,f as k,F as v,a0 as C}from"./index-9a7d77d1.js";import"./VSelect-fde9b95b.js";import"./VTextField-c32c9752.js";import"./VField-28f70089.js";import"./VMenu-28f47fd6.js";import"./ssrBoot-dfd69665.js";import"./VOverlay-bfd1bd36.js";import"./VCheckboxBtn-b9ccac59.js";import"./VChip-ec8b5f79.js";const N={setup(){const{formatDateOrTime:t}=$(),{username:m}=V();return{formatDateOrTime:t,username:m}},components:{NumberPagination:y},data(){return{forum:null,threads:[],pagination:null,pageSize:100,page:1,init:!1}},mounted(){this.$route.params.page&&(this.page=this.$route.params.page),this.getTrash(this.page,this.$route.query.q)},methods:{trashPage(t=1){this.$router.push({name:"thread.trash.page",params:{forum:this.forum.name,page:t},query:{q:this.$route.query.q}})},escapeTitle(t){return t.replace(/ /g,"_")},getTrash(t=1,m=null){const i=this;let l=`${this.$api("THREAD_TRASH").url}?page_size=${this.pageSize}`;this.$axios({method:this.$api("THREAD_TRASH").method,url:l.replace("{forum}",this.$route.params.forum)}).then(function(e){i.pagination=e.data.pagination,i.forum=e.data.data.forum,i.threads=e.data.data.threads,i.init=!0}).catch(function(e){i.$toast.error(i.$error(e,"THREAD_TRASH"))})}}},S={class:"pl-2 text-body-2"},w={class:"text-center"},q={width:"120"};function B(t,m,i,l,e,c){const f=_("router-link"),T=_("NumberPagination");return e.init?(p(),R(b,{key:0},{default:o(()=>[s(h,{style:{"border-bottom":"1px solid #DEE1E6FF"}},{default:o(()=>[s(u,{class:"text-h5 font-weight-bold py-2"},{default:o(()=>[s(f,{to:{name:"thread"}},{default:o(()=>[d(r(e.forum.title),1)]),_:1}),a("p",S,r(t.$t("forum.THREAD_TRASH")),1)]),_:1}),s(u,{cols:"3",class:"text-right py-2"},{default:o(()=>[s(A,{variant:"outlined","prepend-icon":"mdi-arrow-left",color:"secondary",onClick:m[0]||(m[0]=n=>t.$router.back())},{default:o(()=>[d(r(t.$t("action.BACK")),1)]),_:1})]),_:1})]),_:1}),s(h,null,{default:o(()=>[s(u,null,{default:o(()=>[s(D,{density:"compact",hover:!0},{default:o(()=>[a("thead",null,[a("tr",null,[a("th",null,r(t.$t("common.PK")),1),a("th",w,r(t.$t("forum.THREAD_TITLE")),1),a("th",null,r(t.$t("forum.THREAD_USER")),1),a("th",q,r(t.$t("common.DATE")),1)])]),a("tbody",null,[(p(!0),g(v,null,k(e.threads,n=>(p(),g("tr",{key:n.id,class:C(n.is_pinned?"font-weight-bold":"")},[a("td",null,r(n.id),1),a("td",null,[s(f,{to:{name:"thread.read",params:{forum:e.forum.name,thread:n.id,title:c.escapeTitle(n.title)}}},{default:o(()=>[d(r(n.title),1)]),_:2},1032,["to"])]),a("td",null,r(l.username(n)),1),a("td",null,r(l.formatDateOrTime(n.date_or_time)),1)],2))),128))])]),_:1})]),_:1})]),_:1}),s(T,{pagination:e.pagination,getItems:c.trashPage,page:parseInt(e.page)},null,8,["pagination","getItems","page"])]),_:1})):H("",!0)}const tt=E(N,[["render",B],["__scopeId","data-v-996c25cc"]]);export{tt as default};
