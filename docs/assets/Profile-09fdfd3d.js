import{u as C}from"./rules-b0a6d5c6.js";import{_ as y}from"./plugin-vue_export-helper-c27b6911.js";import{V as p,a as T,b as O}from"./VCard-4331e0a1.js";import{V as U}from"./VForm-0758555c.js";import{V as d}from"./VRow-3f802a33.js";import{f as I,a as v,V as h}from"./forwardRefs-b452bb48.js";import{V as A}from"./VFileInput-7b278f7f.js";import{V as r}from"./VCol-b579b353.js";import{V as n}from"./VTextField-83b93000.js";import{o as _,e as S,a as l,w as s,g as P,b as f,t as u,c as V,d as i}from"./index-b7137ed4.js";import"./VField-3c3f03bd.js";import"./VChip-6dd36372.js";const g={setup(){const{rules:t}=C();return{rules:t}},data(){return{validation:!1,user:null,file:null}},mounted(){const t=this;this.$axios({method:this.$api("ACCOUNTS_GET_PROFILE").method,url:this.$api("ACCOUNTS_GET_PROFILE").url}).then(function(e){t.user=e.data.data}).catch(function(e){t.$toast.error(t.$error(e,"ACCOUNTS_GET_PROFILE"))})},methods:{updatePhoto(t){var e=this;this.$axios({method:this.$api("ACCOUNTS_EDIT_PROFILE").method,url:this.$api("ACCOUNTS_EDIT_PROFILE").url,data:t}).then(function(m){e.user=m.data.data,e.$store.setUser(m.data.data)}).catch(function(m){e.$toast.error(e.$error(m,"ACCOUNTS_EDIT_PROFILE"))})},deletePhoto(){this.updatePhoto({photo:null}),this.file=null},uploadPhoto(){this.$refs.fileInput.click()},handleFileChange(){if(this.file){let t=new FormData;t.append("photo",this.file),this.updatePhoto(t)}},save(){var t=this;this.$axios({method:this.$api("ACCOUNTS_EDIT_PROFILE").method,url:this.$api("ACCOUNTS_EDIT_PROFILE").url,data:{first_name:this.user.first_name,last_name:this.user.last_name,call_name:this.user.call_name,tel:this.user.tel,address:this.user.address}}).then(function(e){t.user=e.data.data,t.$store.setUser(e.data.data),t.$toast.success(t.$t("message.SAVED_SUCCESSFULLY"))}).catch(function(e){t.$toast.error(t.$error(e,"ACCOUNTS_EDIT_PROFILE"))})}}},F={key:0},L={class:"py-6 ml-10"},N={class:"text-body-2 font-weight-medium"},b={class:"text-body-2 font-weight-medium"},R={class:"text-body-2 font-weight-medium"},w={class:"text-body-2 font-weight-medium"},D={class:"text-body-2 font-weight-medium"},x={class:"text-body-2 font-weight-medium"};function k(t,e,m,c,o,E){return o.user?(_(),S("div",F,[l(p,{class:"mx-auto mt-3 pa-6 pt-2","max-width":"500"},{default:s(()=>[l(T,{class:"mb-4 text-h5 font-weight-bold text-center"},{default:s(()=>[f(u(t.$t("menu.PROFILE")),1)]),_:1}),l(U,{modelValue:o.validation,"onUpdate:modelValue":e[8]||(e[8]=a=>o.validation=a)},{default:s(()=>[l(d,null,{default:s(()=>[o.user.photo?(_(),V(p,{key:0,flat:"",class:"ml-3"},{default:s(()=>[l(I,{src:o.user.photo,width:"80",height:"80"},null,8,["src"])]),_:1})):(_(),V(p,{key:1,flat:"",width:"80",height:"80",class:"ml-3"},{default:s(()=>[l(v,{size:"x-large",class:"pa-10",icon:"mdi-account-outline"})]),_:1})),i("div",L,[l(h,{variant:"outlined",color:"secondary",disabled:""},{default:s(()=>[f(u(t.$t("accounts.UPLOAD_PHOTO")),1)]),_:1}),l(A,{modelValue:o.file,"onUpdate:modelValue":e[0]||(e[0]=a=>o.file=a),accept:"image/*",ref:"fileInput",onChange:e[1]||(e[1]=()=>{}),style:{display:"none"}},null,8,["modelValue"]),l(h,{variant:"text",color:"pale",class:"ml-4",disabled:""},{default:s(()=>[f(u(t.$t("action.REMOVE")),1)]),_:1})])]),_:1}),l(d,{class:"mt-4"},{default:s(()=>[l(r,null,{default:s(()=>[i("div",N,u(t.$t("accounts.USERNAME")),1),l(n,{modelValue:o.user.username,"onUpdate:modelValue":e[2]||(e[2]=a=>o.user.username=a),density:"compact","prepend-inner-icon":"mdi-email-outline",disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),l(d,{class:"my-0"},{default:s(()=>[l(r,null,{default:s(()=>[i("div",b,u(t.$t("accounts.FIRST_NAME")),1),l(n,{modelValue:o.user.first_name,"onUpdate:modelValue":e[3]||(e[3]=a=>o.user.first_name=a),density:"compact",rules:[c.rules.required]},null,8,["modelValue","rules"])]),_:1}),l(r,null,{default:s(()=>[i("div",R,u(t.$t("accounts.LAST_NAME")),1),l(n,{modelValue:o.user.last_name,"onUpdate:modelValue":e[4]||(e[4]=a=>o.user.last_name=a),density:"compact",rules:[c.rules.required]},null,8,["modelValue","rules"])]),_:1})]),_:1}),l(d,{class:"my-0"},{default:s(()=>[l(r,null,{default:s(()=>[i("div",w,u(t.$t("accounts.CALL_NAME")),1),l(n,{modelValue:o.user.call_name,"onUpdate:modelValue":e[5]||(e[5]=a=>o.user.call_name=a),density:"compact",rules:[c.rules.required]},null,8,["modelValue","rules"])]),_:1})]),_:1}),l(d,{class:"my-0"},{default:s(()=>[l(r,null,{default:s(()=>[i("div",D,u(t.$t("accounts.TEL")),1),l(n,{modelValue:o.user.tel,"onUpdate:modelValue":e[6]||(e[6]=a=>o.user.tel=a),density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),l(d,{class:"my-0"},{default:s(()=>[l(r,null,{default:s(()=>[i("div",x,u(t.$t("accounts.ADDRESS")),1),l(n,{modelValue:o.user.address,"onUpdate:modelValue":e[7]||(e[7]=a=>o.user.address=a),density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),l(O,{class:"my-0 pa-0"},{default:s(()=>[l(h,{color:"secondary",block:"",disabled:!o.validation,onClick:E.save},{default:s(()=>[f(u(t.$t("action.SAVE")),1)]),_:1},8,["disabled","onClick"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])):P("",!0)}const W=y(g,[["render",k]]);export{W as default};
