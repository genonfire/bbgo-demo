import{N as $}from"./NumberPagination-b7d36ddc.js";import{u as y}from"./datetime-87f6df03.js";import{u as V}from"./user-12dc24db.js";import{_ as E}from"./_plugin-vue_export-helper-c27b6911.js";import{V as b}from"./VContainer-f8abdc09.js";import{V as p}from"./VCol-e00bcbf1.js";import{V as A}from"./forwardRefs-924807e8.js";import{V as _}from"./VRow-19d851c3.js";import{V as D}from"./VTable-33df0de0.js";import{r as h,o as d,c as R,w as o,g as H,a as r,b as f,t as a,d as e,e as g,f as k,F as q,_ as v}from"./index-19cdb70b.js";import"./VSelect-05023c47.js";import"./VTextField-61eec21d.js";import"./VField-53be84f4.js";import"./VMenu-65ab0cc9.js";import"./ssrBoot-cad1a3e9.js";import"./VOverlay-545b978e.js";import"./VCheckboxBtn-1c9dfc3d.js";import"./VChip-4e03b0ad.js";const C={setup(){const{formatDateOrTime:t}=y(),{username:l}=V();return{formatDateOrTime:t,username:l}},components:{NumberPagination:$},data(){return{forum:null,threads:[],pagination:null,pageSize:100,page:1,init:!1}},mounted(){this.$route.params.page&&(this.page=this.$route.params.page),this.getTrash(this.page,this.$route.query.q)},methods:{trashPage(t=1){this.$router.push({name:"thread.trash.page",params:{forum:this.forum.name,page:t},query:{q:this.$route.query.q}})},escapeTitle(t){return t.replace(/ /g,"_")},getTrash(t=1,l=null){const m=this;let u="";l&&(u="&q="+l);let n=`${this.$api("THREAD_TRASH").url}?page_size=${this.pageSize}&page=${t}${u}`;this.$axios({method:this.$api("THREAD_TRASH").method,url:n.replace("{forum}",this.$route.params.forum)}).then(function(i){m.pagination=i.data.pagination,m.forum=i.data.data.forum,m.threads=i.data.data.threads,m.init=!0}).catch(function(i){m.$toast.error(m.$error(i,"THREAD_TRASH"))})}}},N={class:"pl-2 text-body-2"},S={class:"text-center"},w={width:"120"};function B(t,l,m,u,n,i){const c=h("router-link"),T=h("NumberPagination");return n.init?(d(),R(b,{key:0},{default:o(()=>[r(_,{style:{"border-bottom":"1px solid #DEE1E6FF"}},{default:o(()=>[r(p,{class:"text-h5 font-weight-bold py-2"},{default:o(()=>[r(c,{to:{name:"thread"}},{default:o(()=>[f(a(n.forum.title),1)]),_:1}),e("p",N,a(t.$t("forum.THREAD_TRASH")),1)]),_:1}),r(p,{cols:"3",class:"text-right py-2"},{default:o(()=>[r(A,{variant:"outlined","prepend-icon":"mdi-arrow-left",color:"secondary",onClick:l[0]||(l[0]=s=>t.$router.back())},{default:o(()=>[f(a(t.$t("action.BACK")),1)]),_:1})]),_:1})]),_:1}),r(_,null,{default:o(()=>[r(p,null,{default:o(()=>[r(D,{density:"compact",hover:!0},{default:o(()=>[e("thead",null,[e("tr",null,[e("th",null,a(t.$t("common.PK")),1),e("th",S,a(t.$t("forum.THREAD_TITLE")),1),e("th",null,a(t.$t("forum.THREAD_USER")),1),e("th",w,a(t.$t("common.DATE")),1)])]),e("tbody",null,[(d(!0),g(q,null,k(n.threads,s=>(d(),g("tr",{key:s.id,class:v(s.is_pinned?"font-weight-bold":"")},[e("td",null,a(s.id),1),e("td",null,[r(c,{to:{name:"thread.read",params:{forum:n.forum.name,thread:s.id,title:i.escapeTitle(s.title)}}},{default:o(()=>[f(a(s.title),1)]),_:2},1032,["to"])]),e("td",null,a(u.username(s)),1),e("td",null,a(u.formatDateOrTime(s.date_or_time)),1)],2))),128))])]),_:1})]),_:1})]),_:1}),r(T,{pagination:n.pagination,getItems:i.trashPage,page:parseInt(n.page)},null,8,["pagination","getItems","page"])]),_:1})):H("",!0)}const tt=E(C,[["render",B],["__scopeId","data-v-c814851e"]]);export{tt as default};
