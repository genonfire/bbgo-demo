import{_ as Z}from"./_plugin-vue_export-helper-c27b6911.js";import{o as ee,e as te,i as ae,k as ne,J as oe,z as b,C as v,y as le,N as re,G as ie,E as m,H as se,l as ue,$ as ce,a as l,M as I,F as R,a1 as A,a2 as de,a3 as fe,S,a4 as ve,B as me,D as xe}from"./index-b7137ed4.js";import{m as he,f as ge,V as we,a as Ve}from"./VField-3c3f03bd.js";import{y as ye,I as be,z as Ce,A as T,C as Fe}from"./forwardRefs-b452bb48.js";const Pe={data(){return{observer:null,observerOptions:{rootMargin:"0px",threshold:1}}},mounted(){this.createObserver()},beforeDestroy(){this.observer&&this.observer.disconnect()},methods:{createObserver(){this.observer=new IntersectionObserver(e=>{e[0].isIntersecting?this.$emit("show"):this.$emit("hidden")},this.observerOptions),this.observer.observe(this.$refs.observer)}}},_e={ref:"observer"};function ke(e,B,x,C,r,n){return ee(),te("div",_e,null,512)}const $e=Z(Pe,[["render",ke]]);const Ie=ae({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...ye(),...he()},"VTextarea"),Oe=ne()({name:"VTextarea",directives:{Intersect:be},inheritAttrs:!1,props:Ie(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,B){let{attrs:x,emit:C,slots:r}=B;const n=oe(e,"modelValue"),{isFocused:f,focus:p,blur:D}=Ce(e),E=b(()=>typeof e.counterValue=="function"?e.counterValue(n.value):(n.value||"").toString().length),G=b(()=>{if(x.maxlength)return x.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function U(t,o){var a,i;!e.autofocus||!t||(i=(a=o[0].target)==null?void 0:a.focus)==null||i.call(a)}const M=v(),h=v(),$=le(""),g=v(),j=b(()=>e.persistentPlaceholder||f.value||e.active);function F(){var t;g.value!==document.activeElement&&((t=g.value)==null||t.focus()),f.value||p()}function J(t){F(),C("click:control",t)}function q(t){C("mousedown:control",t)}function K(t){t.stopPropagation(),F(),S(()=>{n.value="",ve(e["onClick:clear"],t)})}function L(t){var a;const o=t.target;if(n.value=o.value,(a=e.modelModifiers)!=null&&a.trim){const i=[o.selectionStart,o.selectionEnd];S(()=>{o.selectionStart=i[0],o.selectionEnd=i[1]})}}const c=v(),w=v(+e.rows),P=b(()=>["plain","underlined"].includes(e.variant));re(()=>{e.autoGrow||(w.value=+e.rows)});function d(){e.autoGrow&&S(()=>{if(!c.value||!h.value)return;const t=getComputedStyle(c.value),o=getComputedStyle(h.value.$el),a=parseFloat(t.getPropertyValue("--v-field-padding-top"))+parseFloat(t.getPropertyValue("--v-input-padding-top"))+parseFloat(t.getPropertyValue("--v-field-padding-bottom")),i=c.value.scrollHeight,V=parseFloat(t.lineHeight),_=Math.max(parseFloat(e.rows)*V+a,parseFloat(o.getPropertyValue("--v-input-control-height"))),k=parseFloat(e.maxRows)*V+a||1/0,u=xe(i??0,_,k);w.value=Math.floor((u-a)/V),$.value=me(u)})}ie(d),m(n,d),m(()=>e.rows,d),m(()=>e.maxRows,d),m(()=>e.density,d);let s;return m(c,t=>{t?(s=new ResizeObserver(d),s.observe(c.value)):s==null||s.disconnect()}),se(()=>{s==null||s.disconnect()}),ue(()=>{const t=!!(r.counter||e.counter||e.counterValue),o=!!(t||r.details),[a,i]=ce(x),{modelValue:V,..._}=T.filterProps(e),k=ge(e);return l(T,I({ref:M,modelValue:n.value,"onUpdate:modelValue":u=>n.value=u,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":P.value},e.class],style:e.style},a,_,{centerAffix:w.value===1&&!P.value,focused:f.value}),{...r,default:u=>{let{id:y,isDisabled:O,isDirty:z,isReadonly:Q,isValid:W}=u;return l(we,I({ref:h,style:{"--v-textarea-control-height":$.value},onClick:J,onMousedown:q,"onClick:clear":K,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},k,{id:y.value,active:j.value||z.value,centerAffix:w.value===1&&!P.value,dirty:z.value||e.dirty,disabled:O.value,focused:f.value,error:W.value===!1}),{...r,default:X=>{let{props:{class:H,...N}}=X;return l(R,null,[e.prefix&&l("span",{class:"v-text-field__prefix"},[e.prefix]),A(l("textarea",I({ref:g,class:H,value:n.value,onInput:L,autofocus:e.autofocus,readonly:Q.value,disabled:O.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:F,onBlur:D},N,i),null),[[de("intersect"),{handler:U},null,{once:!0}]]),e.autoGrow&&A(l("textarea",{class:[H,"v-textarea__sizer"],id:`${N.id}-sizer`,"onUpdate:modelValue":Y=>n.value=Y,ref:c,readonly:!0,"aria-hidden":"true"},null),[[fe,n.value]]),e.suffix&&l("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:o?u=>{var y;return l(R,null,[(y=r.details)==null?void 0:y.call(r,u),t&&l(R,null,[l("span",null,null),l(Ve,{active:e.persistentCounter||f.value,value:E.value,max:G.value,disabled:e.disabled},r.counter)])])}:void 0})}),Fe({},M,h,g)}});export{$e as O,Oe as V};
