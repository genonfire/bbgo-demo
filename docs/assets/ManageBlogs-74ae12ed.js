import{N}from"./NumberPagination-b7d36ddc.js";import{A as C}from"./ActiveSelector-c1a629e0.js";import{T as U}from"./TagChips-b76015da.js";import{u as v}from"./datetime-87f6df03.js";import{r as V,o as p,c as O,w as i,a as e,b as d,t as s,V as P,d as n,e as I,f as D,F as A,af as G}from"./index-19cdb70b.js";import{_ as k}from"./_plugin-vue_export-helper-c27b6911.js";import{V as w}from"./VContainer-f8abdc09.js";import{V as m}from"./VCol-e00bcbf1.js";import{V as T,a as _,s as R}from"./forwardRefs-924807e8.js";import{V as g}from"./VRow-19d851c3.js";import{V as M,a as S}from"./VTabs-f5dd1bab.js";import{V as y}from"./VTextField-61eec21d.js";import{V as f}from"./VSelect-05023c47.js";import{V as F}from"./VTable-33df0de0.js";import{V as $,a as z,b as H}from"./VCard-4cfd500e.js";import{V as Y}from"./VForm-ca47194b.js";import{V as K}from"./VCombobox-b00d4d33.js";import{c as q,d as W,V as c}from"./VMenu-65ab0cc9.js";import{V as j}from"./VDialog-43c5c180.js";import"./VChip-4e03b0ad.js";import"./VField-53be84f4.js";import"./VOverlay-545b978e.js";import"./ssrBoot-cad1a3e9.js";import"./VCheckboxBtn-1c9dfc3d.js";const J={setup(){const{formatDateTime:t}=v();return{formatDateTime:t}},components:{NumberPagination:N,ActiveSelector:C,TagChips:U},data(){return{blogOption:null,blogs:[],pagination:null,pageSize:20,active:null,search:null,category:null,categoryItems:null,section:"blogs",dialog:!1,init:!1}},computed:{permissions(){return["all","member","staff"]},draft(){return this.active=="false"}},mounted(){this.getBlogs()},methods:{getBlogOption(){const t=this;this.$axios({method:this.$api("BLOG_OPTION").method,url:this.$api("BLOG_OPTION").url}).then(function(l){t.blogOption=l.data.data,t.dialog=!0}).catch(function(l){t.$toast.error(t.$error(l,"BLOG_OPTION"))})},editBlogOption(){const t=this;this.$axios({method:this.$api("EDIT_BLOG_OPTION").method,url:this.$api("EDIT_BLOG_OPTION").url,data:this.blogOption}).then(function(l){t.$toast.success(t.$t("message.SAVED_SUCCESSFULLY")),t.dialog=!1}).catch(function(l){t.$toast.error(t.$error(l,"EDIT_BLOG_OPTION"))})},getBlogs(t=1){const l=this;let h="";this.search&&(h="&q="+this.search);let b="";this.active&&(b="&draft="+this.draft);let a="";this.category&&(a="&category="+this.category);let r=`${this.$api("ADMIN_BLOGS").url}?page_size=${this.pageSize}&page=${t}${b}${a}${h}`;this.$axios({method:this.$api("ADMIN_BLOGS").method,url:r}).then(function(u){l.pagination=u.data.pagination,l.categoryItems=u.data.filter.category,l.blogs=u.data.data,l.init=!0}).catch(function(u){l.$toast.error(l.$error(u,"ADMIN_BLOGS"))})},onUpdateCategory(){this.getBlogs()},onEnter(){this.getBlogs()},onTabUpdate(){this.active=null,this.search=null,this.section=="comments"&&this.$router.push({name:"admin.comments"})}}},Q={class:"text-body-2 font-weight-medium"},X={class:"text-body-2 font-weight-medium"},Z={class:"text-body-2 font-weight-medium"};function x(t,l,h,b,a,r){const u=V("ActiveSelector"),E=V("router-link"),B=V("TagChips"),L=V("NumberPagination");return a.init?(p(),O(w,{key:0},{default:i(()=>[e(g,{style:{"border-bottom":"1px solid #DEE1E6FF"}},{default:i(()=>[e(m,{class:"text-h5 font-weight-bold py-2"},{default:i(()=>[d(s(t.$t("blog.BLOGS")),1)]),_:1}),e(m,{class:"text-right py-2"},{default:i(()=>[e(T,{variant:"outlined","prepend-icon":"mdi-pencil-outline",color:"secondary",onClick:r.getBlogOption},{default:i(()=>[d(s(t.$t("blog.BLOG_OPTION")),1)]),_:1},8,["onClick"])]),_:1})]),_:1}),e(g,{class:"py-2"},{default:i(()=>[e(m,null,{default:i(()=>[e(M,{modelValue:a.section,"onUpdate:modelValue":[l[0]||(l[0]=o=>a.section=o),r.onTabUpdate],density:"comfortable",color:"secondary"},{default:i(()=>[e(S,{value:"blogs"},{default:i(()=>[d(s(t.$t("blog.BLOGS")),1)]),_:1}),e(S,{value:"comments"},{default:i(()=>[d(s(t.$t("blog.COMMENTS")),1)]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),e(m,null,{default:i(()=>[e(y,{modelValue:a.search,"onUpdate:modelValue":l[1]||(l[1]=o=>a.search=o),variant:"outlined",density:"compact","hide-details":"","prepend-inner-icon":"mdi-magnify",placeholder:t.$t("hint.SEARCH_TITLE_CONTENTS_TAGS"),onKeydown:P(r.onEnter,["enter"])},null,8,["modelValue","placeholder","onKeydown"])]),_:1}),e(m,{cols:"2",class:"ml-1 pl-0 pr-3 hidden-sm-and-down"},{default:i(()=>[e(f,{modelValue:a.category,"onUpdate:modelValue":[l[2]||(l[2]=o=>a.category=o),r.onUpdateCategory],clearable:"",variant:"outlined",density:"compact",label:t.$t("blog.CATEGORY"),items:a.categoryItems},null,8,["modelValue","label","items","onUpdate:modelValue"])]),_:1}),e(m,{cols:"2",class:"ml-1 pl-0 pr-3 hidden-sm-and-down"},{default:i(()=>[e(u,{modelValue:a.active,"onUpdate:modelValue":l[3]||(l[3]=o=>a.active=o),getItems:r.getBlogs,label:t.$t("blog.PUBLISHED")},null,8,["modelValue","getItems","label"])]),_:1})]),_:1}),e(g,null,{default:i(()=>[e(m,null,{default:i(()=>[e(F,{density:"comfortable"},{default:i(()=>[n("thead",null,[n("tr",null,[n("th",null,s(t.$t("common.ID")),1),n("th",null,s(t.$t("blog.TITLE")),1),n("th",null,s(t.$t("blog.CATEGORY")),1),n("th",null,s(t.$t("blog.TAGS")),1),n("th",null,s(t.$t("blog.LIKES")),1),n("th",null,s(t.$t("blog.DATE_PUBLISHED")),1),n("th",null,s(t.$t("blog.PUBLISHED")),1)])]),n("tbody",null,[(p(!0),I(A,null,D(a.blogs,o=>(p(),I("tr",{key:o.id,style:G(o.is_published?"":{opacity:.5})},[n("td",null,s(o.id),1),n("td",null,[e(E,{to:{name:"blog.read",params:{blog:o.id,title:o.title.replace(/ /g,"_")}}},{default:i(()=>[d(s(o.title),1)]),_:2},1032,["to"])]),n("td",null,s(o.category),1),n("td",null,[e(B,{tags:o.tags},null,8,["tags"])]),n("td",null,s(o.like),1),n("td",null,s(b.formatDateTime(o.created_at)),1),n("td",null,[o.is_published?(p(),O(_,{key:0,icon:"mdi-check-circle-outline",color:"success"})):(p(),O(_,{key:1,icon:"mdi-close-circle-outline",color:"error"}))])],4))),128))])]),_:1})]),_:1})]),_:1}),e(L,{modelValue:a.pageSize,"onUpdate:modelValue":l[4]||(l[4]=o=>a.pageSize=o),pagination:a.pagination,getItems:r.getBlogs},null,8,["modelValue","pagination","getItems"]),e(j,{modelValue:a.dialog,"onUpdate:modelValue":l[13]||(l[13]=o=>a.dialog=o),"max-width":"500"},{default:i(()=>[e($,{width:"100%",class:"mx-auto mt-3 pa-6 pt-2"},{default:i(()=>[e(z,{class:"mb-4 text-h6 font-weight-bold text-center"},{default:i(()=>[d(s(t.$t("blog.BLOG_OPTION")),1)]),_:1}),e(Y,null,{default:i(()=>[e(g,null,{default:i(()=>[e(m,null,{default:i(()=>[n("div",Q,s(t.$t("blog.TITLE")),1),e(y,{modelValue:a.blogOption.title,"onUpdate:modelValue":l[5]||(l[5]=o=>a.blogOption.title=o),density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),e(g,{class:"my-0"},{default:i(()=>[e(m,null,{default:i(()=>[n("div",X,s(t.$t("blog.DESCRIPTION")),1),e(y,{modelValue:a.blogOption.description,"onUpdate:modelValue":l[6]||(l[6]=o=>a.blogOption.description=o),density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),e(g,{class:"my-0"},{default:i(()=>[e(m,null,{default:i(()=>[n("div",Z,s(t.$t("blog.CATEGORY")),1),e(K,{modelValue:a.blogOption.category,"onUpdate:modelValue":l[7]||(l[7]=o=>a.blogOption.category=o),density:"comfortable",multiple:"",chips:"","closable-chips":"","hide-details":"",placeholder:t.$t("hint.HIT_ENTER_FOR_MULTIPLE")},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),e(q,{density:"compact",class:"py-0"},{default:i(()=>[e(W,null,{default:i(()=>[d(s(t.$t("blog.OPTIONS")),1)]),_:1}),e(c,{class:"py-0"},{default:i(()=>[e(f,{modelValue:a.blogOption.option.permission_list,"onUpdate:modelValue":l[8]||(l[8]=o=>a.blogOption.option.permission_list=o),label:t.$t("blog.PERMISSION_LIST"),items:r.permissions,density:"comfortable"},null,8,["modelValue","label","items"])]),_:1}),e(c,{class:"py-0"},{default:i(()=>[e(f,{modelValue:a.blogOption.option.permission_read,"onUpdate:modelValue":l[9]||(l[9]=o=>a.blogOption.option.permission_read=o),label:t.$t("blog.PERMISSION_READ"),items:r.permissions,density:"comfortable"},null,8,["modelValue","label","items"])]),_:1}),e(c,{class:"py-0"},{default:i(()=>[e(f,{modelValue:a.blogOption.option.permission_write,"onUpdate:modelValue":l[10]||(l[10]=o=>a.blogOption.option.permission_write=o),label:t.$t("blog.PERMISSION_WRITE"),items:r.permissions,density:"comfortable"},null,8,["modelValue","label","items"])]),_:1}),e(c,{class:"py-0"},{default:i(()=>[e(f,{modelValue:a.blogOption.option.permission_reply,"onUpdate:modelValue":l[11]||(l[11]=o=>a.blogOption.option.permission_reply=o),label:t.$t("blog.PERMISSION_REPLY"),items:r.permissions,density:"comfortable"},null,8,["modelValue","label","items"])]),_:1}),e(c,{class:"py-0"},{default:i(()=>[e(f,{modelValue:a.blogOption.option.permission_vote,"onUpdate:modelValue":l[12]||(l[12]=o=>a.blogOption.option.permission_vote=o),label:t.$t("blog.PERMISSION_VOTE"),items:r.permissions,density:"comfortable"},null,8,["modelValue","label","items"])]),_:1})]),_:1}),e(H,{class:"my-0 pa-0"},{default:i(()=>[e(T,{color:"secondary",block:"",onClick:r.editBlogOption},{default:i(()=>[d(s(t.$t("action.SAVE")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})):(p(),O(R,{key:1,indeterminate:"",height:4,color:"secondary"}))}const Se=k(J,[["render",x]]);export{Se as default};
