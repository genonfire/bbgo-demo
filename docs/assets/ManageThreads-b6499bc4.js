import{N as D}from"./NumberPagination-b7d36ddc.js";import{A as S}from"./ActiveSelector-c1a629e0.js";import{u as b}from"./datetime-87f6df03.js";import{u as v}from"./user-12dc24db.js";import{r as h,o as m,c,w as n,a as o,b as p,t as l,V as N,d as a,e as g,f as I,F as R,af as k,g as U}from"./index-19cdb70b.js";import{_ as w}from"./_plugin-vue_export-helper-c27b6911.js";import{V as C}from"./VContainer-f8abdc09.js";import{V as d}from"./VCol-e00bcbf1.js";import{V}from"./VRow-19d851c3.js";import{V as H,a as _}from"./VTabs-f5dd1bab.js";import{V as $}from"./VTextField-61eec21d.js";import{V as F}from"./VTable-33df0de0.js";import{a as T,s as M}from"./forwardRefs-924807e8.js";import"./VSelect-05023c47.js";import"./VMenu-65ab0cc9.js";import"./ssrBoot-cad1a3e9.js";import"./VOverlay-545b978e.js";import"./VField-53be84f4.js";import"./VCheckboxBtn-1c9dfc3d.js";import"./VChip-4e03b0ad.js";const z={setup(){const{formatDateTime:r}=b(),{username:t}=v();return{formatDateTime:r,username:t}},components:{NumberPagination:D,ActiveSelector:S},data(){return{threads:[],pagination:null,pageSize:20,active:null,search:null,section:"threads",init:!1}},computed:{delete(){return this.active=="false"}},mounted(){this.getThreads()},methods:{getThreads(r=1){const t=this;let f="";this.search&&(f="&q="+this.search);let u="";this.active&&(u="&delete="+this.delete);let i=`${this.$api("ADMIN_THREADS").url}?page_size=${this.pageSize}&page=${r}${u}${f}`;this.$axios({method:this.$api("ADMIN_THREADS").method,url:i}).then(function(s){t.pagination=s.data.pagination,t.threads=s.data.data,t.init=!0}).catch(function(s){t.$toast.error(t.$error(s,"ADMIN_THREADS"))})},onTabUpdate(){this.active=null,this.search=null,this.section=="replies"&&this.$router.push({name:"admin.replies"})},onEnter(){this.getThreads()}}},L={key:0,class:"font-weight-bold",style:{color:"#2384e2"}};function P(r,t,f,u,i,s){const y=h("ActiveSelector"),E=h("router-link"),A=h("NumberPagination");return i.init?(m(),c(C,{key:0},{default:n(()=>[o(V,{style:{"border-bottom":"1px solid #DEE1E6FF"}},{default:n(()=>[o(d,{class:"text-h5 font-weight-bold py-2"},{default:n(()=>[p(l(r.$t("forum.THREADS")),1)]),_:1})]),_:1}),o(V,{class:"py-2"},{default:n(()=>[o(d,null,{default:n(()=>[o(H,{modelValue:i.section,"onUpdate:modelValue":[t[0]||(t[0]=e=>i.section=e),s.onTabUpdate],density:"comfortable",color:"secondary"},{default:n(()=>[o(_,{value:"threads"},{default:n(()=>[p(l(r.$t("forum.THREADS")),1)]),_:1}),o(_,{value:"replies"},{default:n(()=>[p(l(r.$t("forum.REPLIES")),1)]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),o(d,null,{default:n(()=>[o($,{modelValue:i.search,"onUpdate:modelValue":t[1]||(t[1]=e=>i.search=e),variant:"outlined",density:"compact","hide-details":"","prepend-inner-icon":"mdi-magnify",placeholder:r.$t("hint.SEARCH_NAME_TITLE_CONTENTS"),onKeydown:N(s.onEnter,["enter"])},null,8,["modelValue","placeholder","onKeydown"])]),_:1}),o(d,{cols:"2",class:"ml-1 pl-0 pr-3 hidden-sm-and-down"},{default:n(()=>[o(y,{modelValue:i.active,"onUpdate:modelValue":t[2]||(t[2]=e=>i.active=e),getItems:s.getThreads},null,8,["modelValue","getItems"])]),_:1})]),_:1}),o(V,null,{default:n(()=>[o(d,null,{default:n(()=>[o(F,{density:"comfortable",hover:!0},{default:n(()=>[a("thead",null,[a("tr",null,[a("th",null,l(r.$t("common.ID")),1),a("th",null,l(r.$t("forum.FORUM_NAME")),1),a("th",null,l(r.$t("forum.THREAD_TITLE")),1),a("th",null,l(r.$t("forum.THREAD_USER")),1),a("th",null,l(r.$t("common.DATE_CREATED")),1),a("th",null,l(r.$t("common.ACTIVE")),1)])]),a("tbody",null,[(m(!0),g(R,null,I(i.threads,e=>(m(),g("tr",{key:e.id,style:k(e.is_deleted?{opacity:.5}:"")},[a("td",null,l(e.id),1),a("td",null,l(e.forum_name),1),a("td",null,[o(E,{to:{name:"thread.read",params:{forum:e.forum_name,thread:e.id,title:e.title.replace(/ /g,"_")}}},{default:n(()=>[p(l(e.title)+" ",1),e.reply_count?(m(),g("span",L," ["+l(e.reply_count)+"] ",1)):U("",!0)]),_:2},1032,["to"])]),a("td",null,l(u.username(e)),1),a("td",null,l(u.formatDateTime(e.created_at)),1),a("td",null,[e.is_deleted?(m(),c(T,{key:1,icon:"mdi-close-circle-outline",color:"error"})):(m(),c(T,{key:0,icon:"mdi-check-circle-outline",color:"success"}))])],4))),128))])]),_:1})]),_:1})]),_:1}),o(A,{modelValue:i.pageSize,"onUpdate:modelValue":t[3]||(t[3]=e=>i.pageSize=e),pagination:i.pagination,getItems:s.getThreads},null,8,["modelValue","pagination","getItems"])]),_:1})):(m(),c(M,{key:1,indeterminate:"",height:4,color:"secondary"}))}const ie=w(z,[["render",P]]);export{ie as default};
