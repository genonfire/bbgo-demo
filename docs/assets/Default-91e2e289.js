import{u as Ze}from"./rules-d6c48776.js";import{_ as ee}from"./_plugin-vue_export-helper-c27b6911.js";import{V as je,a as Je,b as Qe}from"./VCard-f27b3ff1.js";import{V as et}from"./VForm-49541c40.js";import{V as ie}from"./VTextField-3cacdb26.js";import{V as tt}from"./VRow-9dd703d4.js";import{V as we}from"./VCol-aa336778.js";import{V as at}from"./VCheckbox-1dbc37cb.js";import{V as H,a as ue,m as Ee,b as Me,c as Ne,u as Ae,d as Be,e as Ie,f as Le,g as ae,h as nt,i as lt,j as ot,t as st,k as Ve,l as rt,n as it,o as ut}from"./forwardRefs-540210a6.js";import{V as ct}from"./VDialog-f485cea0.js";import{r as Z,o as S,c as $,w as i,a as l,b as B,t as x,d as A,u as dt,e as R,F as U,f as ne,g as z,p as vt,h as mt,i as G,m as se,j as re,k as q,l as X,n as Oe,q as ce,s as Q,v as Pe,x as De,y as N,z as y,A as Re,B as K,C as de,D as ht,E as P,G as ve,H as me,I as Ue,J as He,K as j,L as Ge,M as oe,N as Ye,O as ft,P as gt,Q as yt,R as pt,T as bt,S as _t,U as wt,V as Se,W as Vt}from"./index-cd0f3d5b.js";import{V as J,a as F,b as ke,c as le,d as xe,e as St}from"./VMenu-9059ef23.js";import{u as he}from"./ssrBoot-8c3076c6.js";import{m as kt,u as xt,a as Tt}from"./VOverlay-891c21e4.js";import"./VField-ffd0fbb4.js";import"./VCheckboxBtn-de07382e.js";const Ct={setup(){const{rules:e}=Ze();return{rules:e}},data(){return{dialog:!1,validation:!1,username:null,password:null,showPassword:!1,remember:!1}},beforeUpdate(){this.username=null,this.password=null},methods:{login(){const e=this;this.$axios({method:this.$api("ACCOUNTS_LOGIN").method,url:this.$api("ACCOUNTS_LOGIN").url,data:{username:this.username,password:this.password}}).then(function(n){const a=n.data.data.key,u=n.data.data.user;e.$store.setToken(a,e.remember),e.$store.setUser(u,e.remember),e.$axios.defaults.headers.common.Authorization="Token "+a,e.dialog=!1,e.$toast.success(e.$t("message.HELLO_USER",{call_name:u.call_name}))}).catch(function(n){e.$toast.error(e.$error(n,"ACCOUNTS_LOGIN"))})}}},$t={class:"mb-1"},Et={class:"text-body-2 font-weight-medium"},Mt={class:"mb-1"},Nt={class:"text-body-2 font-weight-medium"},At={class:"ml-1 text-subtitle-2"},Bt={class:"mt-1 text-subtitle-2 text-center"};function It(e,n,a,u,t,s){const o=Z("router-link");return S(),$(ct,{modelValue:t.dialog,"onUpdate:modelValue":n[7]||(n[7]=r=>t.dialog=r),activator:"parent","max-width":"500"},{default:i(()=>[l(je,{class:"pa-6"},{default:i(()=>[l(Je,{class:"mb-4 text-h5 font-weight-bold text-center"},{default:i(()=>[B(x(e.$t("action.LOGIN")),1)]),_:1}),l(et,{modelValue:t.validation,"onUpdate:modelValue":n[3]||(n[3]=r=>t.validation=r)},{default:i(()=>[A("div",$t,[A("div",Et,x(e.$t("accounts.USERNAME")),1),l(ie,{modelValue:t.username,"onUpdate:modelValue":n[0]||(n[0]=r=>t.username=r),density:"compact","prepend-inner-icon":"mdi-email-outline",rules:[u.rules.required,u.rules.emailRules]},null,8,["modelValue","rules"])]),A("div",Mt,[A("div",Nt,x(e.$t("accounts.PASSWORD")),1),l(ie,{modelValue:t.password,"onUpdate:modelValue":n[1]||(n[1]=r=>t.password=r),density:"compact",type:t.showPassword?"text":"password","prepend-inner-icon":"mdi-lock-outline","append-inner-icon":t.showPassword?"mdi-eye":"mdi-eye-off",rules:[u.rules.required],"onClick:appendInner":n[2]||(n[2]=r=>t.showPassword=!t.showPassword),autocomplete:""},null,8,["modelValue","type","append-inner-icon","rules"])])]),_:1},8,["modelValue"]),l(tt,{class:"text-subtitle-2 text-right"},{default:i(()=>[l(we,null,{default:i(()=>[l(at,{modelValue:t.remember,"onUpdate:modelValue":n[4]||(n[4]=r=>t.remember=r),density:"compact",color:"secondary"},{label:i(()=>[A("span",At,x(e.$t("hint.REMEMBER_ME")),1)]),_:1},8,["modelValue"])]),_:1}),l(we,{class:"pt-2"},{default:i(()=>[l(o,{to:{name:"accounts.password.find"},class:"text-decoration-none",onClick:n[5]||(n[5]=r=>t.dialog=!1)},{default:i(()=>[B(x(e.$t("hint.FORGOT_PASSWORD")),1)]),_:1})]),_:1})]),_:1}),l(Qe,{class:"pa-0"},{default:i(()=>[l(H,{color:"secondary",block:"",disabled:!t.validation,onClick:s.login},{default:i(()=>[B(x(e.$t("action.LOGIN")),1)]),_:1},8,["disabled","onClick"])]),_:1}),A("div",Bt,[B(x(e.$t("hint.NO_ACCOUNT"))+" ",1),l(o,{to:{name:"accounts.signup"},class:"text-decoration-none",onClick:n[6]||(n[6]=r=>t.dialog=!1)},{default:i(()=>[B(x(e.$t("action.SIGNUP")),1)]),_:1})])]),_:1})]),_:1},8,["modelValue"])}const Lt=ee(Ct,[["render",It],["__scopeId","data-v-179cc9c4"]]);const Ot={setup(){return{theme:dt()}},computed:{menu(){return[{text:this.$t("menu.BLOG"),icon:"mdi-post-outline",to:{name:"blogs"}}]},staffMenu(){return[{text:this.$t("menu.MANAGE_USERS"),icon:"mdi-account-outline",to:{name:"admin.users"}},{text:this.$t("menu.MANAGE_BLOGS"),icon:"mdi-post-outline",to:{name:"admin.blogs"}},{text:this.$t("menu.MANAGE_FORUMS"),icon:"mdi-forum-outline",to:{name:"admin.forums"}},{text:this.$t("menu.MANAGE_THREADS"),icon:"mdi-message-reply-outline",to:{name:"admin.threads"}},{text:this.$t("menu.SITE_ADMIN"),icon:"mdi-view-grid",url:"https://<your api server>/admin/"}]}},methods:{openMenu(e){const n=e.url;n?window.open(n,"_blank"):this.$router.push(e.to)},languageSelected(e){return this.$i18n.locale==e},changeLocale(e){if(this.$i18n.locale!=e){const n="api";let a="https://<your api server>/";this.$store.const("DEFAULT_LANGUAGE")!=e&&(a+=e+"/"),this.$axios.defaults.baseURL=a+n,this.$i18n.locale=e,this.$store.setLocale(e)}},setTheme(e){this.theme.global.name.value=e,this.$store.setTheme(e)}}},Pt=e=>(vt("data-v-d84196dc"),e=e(),mt(),e),Dt={class:"mx-4"},Rt={class:"mt-2 mx-6 text-caption footer"},Ut=Pt(()=>A("a",{href:"https://github.com/genonfire/bbgo-core",target:"_blank"}," Made by bbgo ",-1));function Ht(e,n,a,u,t,s){return S(),R(U,null,[l(le,null,{default:i(()=>[(S(!0),R(U,null,ne(s.menu,(o,r)=>(S(),$(J,{key:r,value:o,onClick:m=>e.$router.push(o.to)},{prepend:i(()=>[o.icon?(S(),$(ue,{key:0,icon:o.icon},null,8,["icon"])):z("",!0)]),default:i(()=>[l(F,{textContent:x(o.text)},null,8,["textContent"])]),_:2},1032,["value","onClick"]))),128)),l(ke,{class:"my-1"})]),_:1}),e.$store.isStaff?(S(),$(le,{key:0,class:"pt-0"},{default:i(()=>[l(F,{class:"ml-3 font-weight-bold"},{default:i(()=>[B(x(e.$t("common.ADMIN")),1)]),_:1}),(S(!0),R(U,null,ne(s.staffMenu,(o,r)=>(S(),$(J,{key:r,value:o,onClick:m=>s.openMenu(o)},{prepend:i(()=>[o.icon?(S(),$(ue,{key:0,icon:o.icon},null,8,["icon"])):z("",!0)]),default:i(()=>[l(F,{textContent:x(o.text)},null,8,["textContent"])]),_:2},1032,["value","onClick"]))),128)),l(ke,{class:"my-1"})]),_:1})):z("",!0),!e.$store.isLoggedIn||e.$store.isStaff?(S(),$(le,{key:1,class:"pt-0"},{default:i(()=>[l(xe,null,{default:i(()=>[B(x(e.$t("common.LANGUAGE")),1)]),_:1}),(S(!0),R(U,null,ne(e.$store.const("LANGUAGES"),(o,r)=>(S(),$(J,{key:r,value:o,active:s.languageSelected(o.value),onClick:m=>s.changeLocale(o.value)},{default:i(()=>[l(F,{textContent:x(o.text)},null,8,["textContent"])]),_:2},1032,["value","active","onClick"]))),128)),l(xe,{class:"ml-3"},{default:i(()=>[B(x(e.$t("common.THEME")),1)]),_:1}),A("div",Dt,[A("span",null,[l(H,{icon:"mdi-weather-sunny",variant:"flat",onClick:n[0]||(n[0]=o=>s.setTheme("light"))})]),A("span",null,[l(H,{icon:"mdi-weather-night",variant:"flat",onClick:n[1]||(n[1]=o=>s.setTheme("dark"))})])])]),_:1})):z("",!0),A("div",Rt,[B(" Â© "+x(new Date().getFullYear())+" "+x(e.$t("info.SITENAME"))+" ",1),Ut])],64)}const Gt=ee(Ot,[["render",Ht],["__scopeId","data-v-d84196dc"]]),Yt={computed:{menu(){return[{text:this.$t("menu.PROFILE"),to:{name:"accounts.profile"}},{text:this.$t("menu.SETTINGS"),to:{name:"accounts.settings"}},{text:this.$t("menu.CHANGE_PASSWORD"),to:{name:"accounts.password.change"}}]}},methods:{logout(){const e=this;this.$axios({method:this.$api("ACCOUNTS_LOGOUT").method,url:this.$api("ACCOUNTS_LOGOUT").url}).then(function(n){e.$axios.defaults.headers.common.Authorization="",e.$store.logout(),e.$router.push({name:"home"}),e.$toast.info(e.$t("message.LOGOUT_COMPLETE"))}).catch(function(n){e.$toast.error(e.$error(n,"ACCOUNTS_LOGOUT"))})}}};function Wt(e,n,a,u,t,s){return S(),$(St,{activator:"#avatar"},{default:i(()=>[l(le,{density:"compact",nav:""},{default:i(()=>[(S(!0),R(U,null,ne(s.menu,(o,r)=>(S(),$(J,{key:r,value:o,onClick:m=>e.$router.push(o.to),class:"px-4 py-0 my-0"},{default:i(()=>[l(F,{textContent:x(o.text)},null,8,["textContent"])]),_:2},1032,["value","onClick"]))),128)),l(J,{onClick:s.logout,class:"px-4 py-0 my-0",style:{color:"#EB6669"}},{default:i(()=>[l(F,null,{default:i(()=>[l(ue,{class:"mr-1"},{default:i(()=>[B("mdi-logout")]),_:1}),B(" "+x(e.$t("action.LOGOUT")),1)]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1})}const zt=ee(Yt,[["render",Wt]]),Ft="/logo.png";const qt=G({text:String,...se(),...re()},"VToolbarTitle"),Xt=q()({name:"VToolbarTitle",props:qt(),setup(e,n){let{slots:a}=n;return X(()=>{const u=!!(a.default||a.text||e.text);return l(e.tag,{class:["v-toolbar-title",e.class],style:e.style},{default:()=>{var t;return[u&&l("div",{class:"v-toolbar-title__placeholder"},[a.text?a.text():e.text,(t=a.default)==null?void 0:t.call(a)])]}})}),{}}}),Kt=[null,"prominent","default","comfortable","compact"],We=G({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>Kt.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...Ee(),...se(),...Me(),...Ne(),...re({tag:"header"}),...Oe()},"VToolbar"),Te=q()({name:"VToolbar",props:We(),setup(e,n){var c;let{slots:a}=n;const{backgroundColorClasses:u,backgroundColorStyles:t}=ce(Q(e,"color")),{borderClasses:s}=Ae(e),{elevationClasses:o}=Be(e),{roundedClasses:r}=Ie(e),{themeClasses:m}=Pe(e),{rtlClasses:g}=De(),d=N(!!(e.extended||(c=a.extension)!=null&&c.call(a))),b=y(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),h=y(()=>d.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return Re({VBtn:{variant:"text"}}),X(()=>{var O;const w=!!(e.title||a.title),k=!!(a.image||e.image),L=(O=a.extension)==null?void 0:O.call(a);return d.value=!!(e.extended||L),l(e.tag,{class:["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},u.value,s.value,o.value,r.value,m.value,g.value,e.class],style:[t.value,e.style]},{default:()=>[k&&l("div",{key:"image",class:"v-toolbar__image"},[a.image?l(ae,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},a.image):l(Le,{key:"image-img",cover:!0,src:e.image},null)]),l(ae,{defaults:{VTabs:{height:K(b.value)}}},{default:()=>{var I,f,M;return[l("div",{class:"v-toolbar__content",style:{height:K(b.value)}},[a.prepend&&l("div",{class:"v-toolbar__prepend"},[(I=a.prepend)==null?void 0:I.call(a)]),w&&l(Xt,{key:"title",text:e.title},{text:a.title}),(f=a.default)==null?void 0:f.call(a),a.append&&l("div",{class:"v-toolbar__append"},[(M=a.append)==null?void 0:M.call(a)])])]}}),l(ae,{defaults:{VTabs:{height:K(h.value)}}},{default:()=>[l(nt,null,{default:()=>[d.value&&l("div",{class:"v-toolbar__extension",style:{height:K(h.value)}},[L])]})]})]})}),{contentHeight:b,extensionHeight:h}}}),Zt=G({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function jt(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:a}=n;let u=0;const t=de(null),s=N(0),o=N(0),r=N(0),m=N(!1),g=N(!1),d=y(()=>Number(e.scrollThreshold)),b=y(()=>ht((d.value-s.value)/d.value||0)),h=()=>{const c=t.value;!c||a&&!a.value||(u=s.value,s.value="window"in c?c.pageYOffset:c.scrollTop,g.value=s.value<u,r.value=Math.abs(s.value-d.value))};return P(g,()=>{o.value=o.value||s.value}),P(m,()=>{o.value=0}),ve(()=>{P(()=>e.scrollTarget,c=>{var k;const w=c?document.querySelector(c):window;w&&w!==t.value&&((k=t.value)==null||k.removeEventListener("scroll",h),t.value=w,t.value.addEventListener("scroll",h,{passive:!0}))},{immediate:!0})}),me(()=>{var c;(c=t.value)==null||c.removeEventListener("scroll",h)}),a&&P(a,h,{immediate:!0}),{scrollThreshold:d,currentScroll:s,currentThreshold:r,isScrollActive:m,scrollRatio:b,isScrollingUp:g,savedScroll:o}}const Jt=G({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...We(),...Ue(),...Zt(),height:{type:[Number,String],default:64}},"VAppBar"),Qt=q()({name:"VAppBar",props:Jt(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:a}=n;const u=de(),t=He(e,"modelValue"),s=y(()=>{var M;const f=new Set(((M=e.scrollBehavior)==null?void 0:M.split(" "))??[]);return{hide:f.has("hide"),fullyHide:f.has("fully-hide"),inverted:f.has("inverted"),collapse:f.has("collapse"),elevate:f.has("elevate"),fadeImage:f.has("fade-image")}}),o=y(()=>{const f=s.value;return f.hide||f.fullyHide||f.inverted||f.collapse||f.elevate||f.fadeImage||!t.value}),{currentScroll:r,scrollThreshold:m,isScrollingUp:g,scrollRatio:d}=jt(e,{canScroll:o}),b=y(()=>s.value.hide||s.value.fullyHide),h=y(()=>e.collapse||s.value.collapse&&(s.value.inverted?d.value>0:d.value===0)),c=y(()=>e.flat||s.value.fullyHide&&!t.value||s.value.elevate&&(s.value.inverted?r.value>0:r.value===0)),w=y(()=>s.value.fadeImage?s.value.inverted?1-d.value:d.value:void 0),k=y(()=>{var D,v;const f=Number(((D=u.value)==null?void 0:D.contentHeight)??e.height),M=Number(((v=u.value)==null?void 0:v.extensionHeight)??0);return b.value?r.value<m.value||s.value.fullyHide?f+M:f:f+M});j(y(()=>!!e.scrollBehavior),()=>{Ye(()=>{b.value?s.value.inverted?t.value=r.value>m.value:t.value=g.value||r.value<m.value:t.value=!0})});const{ssrBootStyles:L}=he(),{layoutItemStyles:O,layoutIsReady:I}=Ge({id:e.name,order:y(()=>parseInt(e.order,10)),position:Q(e,"location"),layoutSize:k,elementSize:N(void 0),active:t,absolute:Q(e,"absolute")});return X(()=>{const f=Te.filterProps(e);return l(Te,oe({ref:u,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...O.value,"--v-toolbar-image-opacity":w.value,height:void 0,...L.value},e.style]},f,{collapse:h.value,flat:c.value}),a)}),I}}),ea=G({...lt({icon:"$menu",variant:"text"})},"VAppBarNavIcon"),ta=q()({name:"VAppBarNavIcon",props:ea(),setup(e,n){let{slots:a}=n;return X(()=>l(H,oe(e,{class:["v-app-bar-nav-icon"]}),a)),{}}});function aa(e){let{rootEl:n,isSticky:a,layoutItemStyles:u}=e;const t=N(!1),s=N(0),o=y(()=>{const g=typeof t.value=="boolean"?"top":t.value;return[a.value?{top:"auto",bottom:"auto",height:void 0}:void 0,t.value?{[g]:K(s.value)}:{top:u.value.top}]});ve(()=>{P(a,g=>{g?window.addEventListener("scroll",m,{passive:!0}):window.removeEventListener("scroll",m)},{immediate:!0})}),me(()=>{window.removeEventListener("scroll",m)});let r=0;function m(){const g=r>window.scrollY?"up":"down",d=n.value.getBoundingClientRect(),b=parseFloat(u.value.top??0),h=window.scrollY-Math.max(0,s.value-b),c=d.height+Math.max(s.value,b)-window.scrollY-window.innerHeight,w=parseFloat(getComputedStyle(n.value).getPropertyValue("--v-body-scroll-y"))||0;d.height<window.innerHeight-b?(t.value="top",s.value=b):g==="up"&&t.value==="bottom"||g==="down"&&t.value==="top"?(s.value=window.scrollY+d.top-w,t.value=!0):g==="down"&&c<=0?(s.value=0,t.value="bottom"):g==="up"&&h<=0&&(w?t.value!=="top"&&(s.value=-h+w+b,t.value="top"):(s.value=d.top+h,t.value="top")),r=window.scrollY}return{isStuck:t,stickyStyles:o}}const na=100,la=20;function Ce(e){const n=1.41421356237;return(e<0?-1:1)*Math.sqrt(Math.abs(e))*n}function $e(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let n=0;for(let a=e.length-1;a>0;a--){if(e[a].t===e[a-1].t)continue;const u=Ce(n),t=(e[a].d-e[a-1].d)/(e[a].t-e[a-1].t);n+=(t-u)*Math.abs(t),a===e.length-1&&(n*=.5)}return Ce(n)*1e3}function oa(){const e={};function n(t){Array.from(t.changedTouches).forEach(s=>{(e[s.identifier]??(e[s.identifier]=new ft(la))).push([t.timeStamp,s])})}function a(t){Array.from(t.changedTouches).forEach(s=>{delete e[s.identifier]})}function u(t){var g;const s=(g=e[t])==null?void 0:g.values().reverse();if(!s)throw new Error(`No samples for touch id ${t}`);const o=s[0],r=[],m=[];for(const d of s){if(o[0]-d[0]>na)break;r.push({t:d[0],d:d[1].clientX}),m.push({t:d[0],d:d[1].clientY})}return{x:$e(r),y:$e(m),get direction(){const{x:d,y:b}=this,[h,c]=[Math.abs(d),Math.abs(b)];return h>c&&d>=0?"right":h>c&&d<=0?"left":c>h&&b>=0?"down":c>h&&b<=0?"up":sa()}}}return{addMovement:n,endTouch:a,getVelocity:u}}function sa(){throw new Error}function ra(e){let{el:n,isActive:a,isTemporary:u,width:t,touchless:s,position:o}=e;ve(()=>{window.addEventListener("touchstart",I,{passive:!0}),window.addEventListener("touchmove",f,{passive:!1}),window.addEventListener("touchend",M,{passive:!0})}),me(()=>{window.removeEventListener("touchstart",I),window.removeEventListener("touchmove",f),window.removeEventListener("touchend",M)});const r=y(()=>["left","right"].includes(o.value)),{addMovement:m,endTouch:g,getVelocity:d}=oa();let b=!1;const h=N(!1),c=N(0),w=N(0);let k;function L(v,p){return(o.value==="left"?v:o.value==="right"?document.documentElement.clientWidth-v:o.value==="top"?v:o.value==="bottom"?document.documentElement.clientHeight-v:W())-(p?t.value:0)}function O(v){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const _=o.value==="left"?(v-w.value)/t.value:o.value==="right"?(document.documentElement.clientWidth-v-w.value)/t.value:o.value==="top"?(v-w.value)/t.value:o.value==="bottom"?(document.documentElement.clientHeight-v-w.value)/t.value:W();return p?Math.max(0,Math.min(1,_)):_}function I(v){if(s.value)return;const p=v.changedTouches[0].clientX,_=v.changedTouches[0].clientY,V=25,C=o.value==="left"?p<V:o.value==="right"?p>document.documentElement.clientWidth-V:o.value==="top"?_<V:o.value==="bottom"?_>document.documentElement.clientHeight-V:W(),T=a.value&&(o.value==="left"?p<t.value:o.value==="right"?p>document.documentElement.clientWidth-t.value:o.value==="top"?_<t.value:o.value==="bottom"?_>document.documentElement.clientHeight-t.value:W());(C||T||a.value&&u.value)&&(k=[p,_],w.value=L(r.value?p:_,a.value),c.value=O(r.value?p:_),b=w.value>-20&&w.value<80,g(v),m(v))}function f(v){const p=v.changedTouches[0].clientX,_=v.changedTouches[0].clientY;if(b){if(!v.cancelable){b=!1;return}const C=Math.abs(p-k[0]),T=Math.abs(_-k[1]);(r.value?C>T&&C>3:T>C&&T>3)?(h.value=!0,b=!1):(r.value?T:C)>3&&(b=!1)}if(!h.value)return;v.preventDefault(),m(v);const V=O(r.value?p:_,!1);c.value=Math.max(0,Math.min(1,V)),V>1?w.value=L(r.value?p:_,!0):V<0&&(w.value=L(r.value?p:_,!1))}function M(v){if(b=!1,!h.value)return;m(v),h.value=!1;const p=d(v.changedTouches[0].identifier),_=Math.abs(p.x),V=Math.abs(p.y);(r.value?_>V&&_>400:V>_&&V>3)?a.value=p.direction===({left:"right",right:"left",top:"down",bottom:"up"}[o.value]||W()):a.value=c.value>.5}const D=y(()=>h.value?{transform:o.value==="left"?`translateX(calc(-100% + ${c.value*t.value}px))`:o.value==="right"?`translateX(calc(100% - ${c.value*t.value}px))`:o.value==="top"?`translateY(calc(-100% + ${c.value*t.value}px))`:o.value==="bottom"?`translateY(calc(100% - ${c.value*t.value}px))`:W(),transition:"none"}:void 0);return j(h,()=>{var _,V;const v=((_=n.value)==null?void 0:_.style.transform)??null,p=((V=n.value)==null?void 0:V.style.transition)??null;Ye(()=>{var C,T,Y,te;(T=n.value)==null||T.style.setProperty("transform",((C=D.value)==null?void 0:C.transform)||"none"),(te=n.value)==null||te.style.setProperty("transition",((Y=D.value)==null?void 0:Y.transition)||null)}),gt(()=>{var C,T;(C=n.value)==null||C.style.setProperty("transform",v),(T=n.value)==null||T.style.setProperty("transition",p)})}),{isDragging:h,dragProgress:c,dragStyles:D}}function W(){throw new Error}const ia=["start","end","left","right","top","bottom"],ua=G({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>ia.includes(e)},sticky:Boolean,...Ee(),...se(),...kt(),...yt(),...Me(),...Ue(),...Ne(),...re({tag:"nav"}),...Oe()},"VNavigationDrawer"),ca=q()({name:"VNavigationDrawer",props:ua(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,n){let{attrs:a,emit:u,slots:t}=n;const{isRtl:s}=De(),{themeClasses:o}=Pe(e),{borderClasses:r}=Ae(e),{backgroundColorClasses:m,backgroundColorStyles:g}=ce(Q(e,"color")),{elevationClasses:d}=Be(e),{displayClasses:b,mobile:h}=pt(e),{roundedClasses:c}=Ie(e),w=ot(),k=He(e,"modelValue",null,E=>!!E),{ssrBootStyles:L}=he(),{scopeId:O}=xt(),I=de(),f=N(!1),{runOpenDelay:M,runCloseDelay:D}=Tt(e,E=>{f.value=E}),v=y(()=>e.rail&&e.expandOnHover&&f.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),p=y(()=>st(e.location,s.value)),_=y(()=>e.persistent),V=y(()=>!e.permanent&&(h.value||e.temporary)),C=y(()=>e.sticky&&!V.value&&p.value!=="bottom");j(()=>e.expandOnHover&&e.rail!=null,()=>{P(f,E=>u("update:rail",!E))}),j(()=>!e.disableResizeWatcher,()=>{P(V,E=>!e.permanent&&_t(()=>k.value=!E))}),j(()=>!e.disableRouteWatcher&&!!w,()=>{P(w.currentRoute,()=>V.value&&(k.value=!1))}),P(()=>e.permanent,E=>{E&&(k.value=!0)}),e.modelValue==null&&!V.value&&(k.value=e.permanent||!h.value);const{isDragging:T,dragProgress:Y}=ra({el:I,isActive:k,isTemporary:V,width:v,touchless:Q(e,"touchless"),position:p}),te=y(()=>{const E=V.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):v.value;return T.value?E*Y.value:E}),ze=y(()=>["top","bottom"].includes(e.location)?0:v.value),{layoutItemStyles:fe,layoutItemScrimStyles:Fe,layoutIsReady:qe}=Ge({id:e.name,order:y(()=>parseInt(e.order,10)),position:p,layoutSize:te,elementSize:ze,active:y(()=>k.value||T.value),disableTransitions:y(()=>T.value),absolute:y(()=>e.absolute||C.value&&typeof ge.value!="string")}),{isStuck:ge,stickyStyles:Xe}=aa({rootEl:I,isSticky:C,layoutItemStyles:fe}),ye=ce(y(()=>typeof e.scrim=="string"?e.scrim:null)),Ke=y(()=>({...T.value?{opacity:Y.value*.2,transition:"none"}:void 0,...Fe.value}));return Re({VList:{bgColor:"transparent"}}),X(()=>{const E=t.image||e.image;return l(U,null,[l(e.tag,oe({ref:I,onMouseenter:M,onMouseleave:D,class:["v-navigation-drawer",`v-navigation-drawer--${p.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":f.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":V.value,"v-navigation-drawer--persistent":_.value,"v-navigation-drawer--active":k.value,"v-navigation-drawer--sticky":C.value},o.value,m.value,r.value,b.value,d.value,c.value,e.class],style:[g.value,fe.value,L.value,Xe.value,e.style,["top","bottom"].includes(p.value)?{height:"auto"}:{}]},O,a),{default:()=>{var pe,be,_e;return[E&&l("div",{key:"image",class:"v-navigation-drawer__img"},[t.image?l(ae,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},t.image):l(Le,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),t.prepend&&l("div",{class:"v-navigation-drawer__prepend"},[(pe=t.prepend)==null?void 0:pe.call(t)]),l("div",{class:"v-navigation-drawer__content"},[(be=t.default)==null?void 0:be.call(t)]),t.append&&l("div",{class:"v-navigation-drawer__append"},[(_e=t.append)==null?void 0:_e.call(t)])]}}),l(bt,{name:"fade-transition"},{default:()=>[V.value&&(T.value||k.value)&&!!e.scrim&&l("div",oe({class:["v-navigation-drawer__scrim",ye.backgroundColorClasses.value],style:[Ke.value,ye.backgroundColorStyles.value],onClick:()=>{_.value||(k.value=!1)}},O),null)]})])}),qe.then(()=>({isStuck:ge}))}}),da={components:{LoginDialog:Lt,Menu:Gt,AvatarMenu:zt},data(){return{drawer:!1,search:null,bell:!1}},computed:{user(){return this.$store.getUser}},methods:{onEsc(){this.$refs.search.blur()},onEnter(){this.searchAnything(this.search)},searchAnything(e){this.onEsc(),this.$route.name.includes("blogs")?this.$router.push({name:"blogs",query:{q:this.search}}):this.$route.name.includes("thread")&&this.$router.push({name:"thread",params:{forum:this.$route.params.forum},query:{q:this.search}})}}},va={key:0};function ma(e,n,a,u,t,s){const o=Z("AvatarMenu"),r=Z("LoginDialog"),m=Z("Menu");return S(),R(U,null,[l(Qt,null,{prepend:i(()=>[l(ta,{onClick:n[0]||(n[0]=wt(g=>t.drawer=!t.drawer,["stop"]))}),A("img",{src:Ft,class:"appbar-logo",onClick:n[1]||(n[1]=g=>e.$router.push({name:"home"}))})]),append:i(()=>[s.user?(S(),R("div",va,[l(H,{id:"bell",icon:t.bell?"mdi-bell-badge-outline":"mdi-bell-outline",class:"mr-2",color:t.bell?"secondary":""},null,8,["icon","color"]),l(H,{id:"avatar",icon:""},{default:i(()=>[s.user.photo?(S(),$(Ve,{key:0,image:s.user.photo,size:"42"},null,8,["image"])):(S(),$(Ve,{key:1,icon:"mdi-account-outline",color:"tertiary",size:"42"}))]),_:1}),l(o)])):z("",!0),s.user?z("",!0):(S(),$(H,{key:1,variant:"flat",color:"secondary",width:"80"},{default:i(()=>[B(x(e.$t("action.LOGIN"))+" ",1),l(r)]),_:1}))]),default:i(()=>[l(rt,{class:"mx-3 appbar-search"},{default:i(()=>[l(ie,{ref:"search",modelValue:t.search,"onUpdate:modelValue":n[2]||(n[2]=g=>t.search=g),variant:"outlined",density:"compact",clearable:"","hide-details":"","prepend-inner-icon":"mdi-magnify",placeholder:e.$t("common.SEARCH"),onKeydown:[Se(s.onEsc,["esc"]),Se(s.onEnter,["enter"])],accesskey:"/"},null,8,["modelValue","placeholder","onKeydown"])]),_:1})]),_:1}),l(ca,{modelValue:t.drawer,"onUpdate:modelValue":n[3]||(n[3]=g=>t.drawer=g)},{default:i(()=>[l(m)]),_:1},8,["modelValue"])],64)}const ha=ee(da,[["render",ma]]);const fa=G({scrollable:Boolean,...se(),...it(),...re({tag:"main"})},"VMain"),ga=q()({name:"VMain",props:fa(),setup(e,n){let{slots:a}=n;const{dimensionStyles:u}=ut(e),{mainStyles:t,layoutIsReady:s}=Vt(),{ssrBootStyles:o}=he();return X(()=>l(e.tag,{class:["v-main",{"v-main--scrollable":e.scrollable},e.class],style:[t.value,o.value,u.value,e.style]},{default:()=>{var r,m;return[e.scrollable?l("div",{class:"v-main__scroller"},[(r=a.default)==null?void 0:r.call(a)]):(m=a.default)==null?void 0:m.call(a)]}})),s}}),ya={};function pa(e,n){const a=Z("router-view");return S(),$(ga,null,{default:i(()=>[(S(),$(a,{key:e.$route.fullPath}))]),_:1})}const ba=ee(ya,[["render",pa]]);const Oa={__name:"Default",setup(e){return(n,a)=>(S(),R(U,null,[l(ha),l(ba)],64))}};export{Oa as default};
