import{N as D}from"./NumberPagination-725c0352.js";import{A as S}from"./ActiveSelector-846d7c7f.js";import{u as b}from"./datetime-87f6df03.js";import{u as v}from"./user-12dc24db.js";import{r as h,o as s,c,w as r,a as l,b as p,t as a,V as N,d as n,e as V,f as I,F as R,ah as k,g as U}from"./index-b7137ed4.js";import{_ as w}from"./_plugin-vue_export-helper-c27b6911.js";import{V as C}from"./VContainer-24aec8ae.js";import{V as u}from"./VCol-b579b353.js";import{V as g}from"./VRow-3f802a33.js";import{V as H,a as _}from"./VTabs-77954cac.js";import{V as F}from"./VTextField-83b93000.js";import{V as M}from"./VTable-c4f0321d.js";import{a as T,B}from"./forwardRefs-b452bb48.js";import"./VSelect-4a3dc8da.js";import"./VMenu-45d141ca.js";import"./ssrBoot-afe64649.js";import"./VOverlay-3da7fd39.js";import"./VField-3c3f03bd.js";import"./VCheckboxBtn-7d7bc7aa.js";import"./VChip-6dd36372.js";const L={setup(){const{formatDateTime:i}=b(),{username:t}=v();return{formatDateTime:i,username:t}},components:{NumberPagination:D,ActiveSelector:S},data(){return{threads:[],pagination:null,pageSize:20,active:null,search:null,section:"threads",init:!1}},computed:{delete(){return this.active=="false"}},mounted(){this.getThreads()},methods:{getThreads(i=1){const t=this;this.search&&""+this.search;let f="";this.active&&(f="deleted"+this.delete);let m=`${this.$api("ADMIN_THREADS").url}${f}`;console.log(m),this.$axios({method:this.$api("ADMIN_THREADS").method,url:m}).then(function(o){t.pagination=o.data.pagination,t.threads=o.data.data,t.init=!0}).catch(function(o){t.$toast.error(t.$error(o,"ADMIN_THREADS"))})},onTabUpdate(){this.active=null,this.search=null,this.section=="replies"&&this.$router.push({name:"admin.replies"})},onEnter(){}}},P={key:0,class:"font-weight-bold",style:{color:"#2384e2"}};function $(i,t,f,m,o,d){const y=h("ActiveSelector"),E=h("router-link"),A=h("NumberPagination");return o.init?(s(),c(C,{key:0},{default:r(()=>[l(g,{style:{"border-bottom":"1px solid #DEE1E6FF"}},{default:r(()=>[l(u,{class:"text-h5 font-weight-bold py-2"},{default:r(()=>[p(a(i.$t("forum.THREADS")),1)]),_:1})]),_:1}),l(g,{class:"py-2"},{default:r(()=>[l(u,null,{default:r(()=>[l(H,{modelValue:o.section,"onUpdate:modelValue":[t[0]||(t[0]=e=>o.section=e),d.onTabUpdate],density:"comfortable",color:"secondary"},{default:r(()=>[l(_,{value:"threads"},{default:r(()=>[p(a(i.$t("forum.THREADS")),1)]),_:1}),l(_,{value:"replies"},{default:r(()=>[p(a(i.$t("forum.REPLIES")),1)]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),l(u,null,{default:r(()=>[l(F,{modelValue:o.search,"onUpdate:modelValue":t[1]||(t[1]=e=>o.search=e),variant:"outlined",density:"compact","hide-details":"","prepend-inner-icon":"mdi-magnify",placeholder:i.$t("hint.SEARCH_NAME_TITLE_CONTENTS"),onKeydown:N(d.onEnter,["enter"])},null,8,["modelValue","placeholder","onKeydown"])]),_:1}),l(u,{cols:"2",class:"ml-1 pl-0 pr-3 hidden-sm-and-down"},{default:r(()=>[l(y,{modelValue:o.active,"onUpdate:modelValue":t[2]||(t[2]=e=>o.active=e),getItems:d.getThreads},null,8,["modelValue","getItems"])]),_:1})]),_:1}),l(g,null,{default:r(()=>[l(u,null,{default:r(()=>[l(M,{density:"comfortable",hover:!0},{default:r(()=>[n("thead",null,[n("tr",null,[n("th",null,a(i.$t("common.ID")),1),n("th",null,a(i.$t("forum.FORUM_NAME")),1),n("th",null,a(i.$t("forum.THREAD_TITLE")),1),n("th",null,a(i.$t("forum.THREAD_USER")),1),n("th",null,a(i.$t("common.DATE_CREATED")),1),n("th",null,a(i.$t("common.ACTIVE")),1)])]),n("tbody",null,[(s(!0),V(R,null,I(o.threads,e=>(s(),V("tr",{key:e.id,style:k(e.is_deleted?{opacity:.5}:"")},[n("td",null,a(e.id),1),n("td",null,a(e.forum_name),1),n("td",null,[l(E,{to:{name:"thread.read",params:{forum:e.forum_name,thread:e.id,title:e.title.replace(/ /g,"_")}}},{default:r(()=>[p(a(e.title)+" ",1),e.reply_count?(s(),V("span",P," ["+a(e.reply_count)+"] ",1)):U("",!0)]),_:2},1032,["to"])]),n("td",null,a(m.username(e)),1),n("td",null,a(m.formatDateTime(e.created_at)),1),n("td",null,[e.is_deleted?(s(),c(T,{key:1,icon:"mdi-close-circle-outline",color:"error"})):(s(),c(T,{key:0,icon:"mdi-check-circle-outline",color:"success"}))])],4))),128))])]),_:1})]),_:1})]),_:1}),l(A,{modelValue:o.pageSize,"onUpdate:modelValue":t[3]||(t[3]=e=>o.pageSize=e),pagination:o.pagination,getItems:d.getThreads},null,8,["modelValue","pagination","getItems"])]),_:1})):(s(),c(B,{key:1,indeterminate:"",height:4,color:"secondary"}))}const ie=w(L,[["render",$]]);export{ie as default};
