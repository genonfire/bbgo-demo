import{T as b}from"./Tiptap-a3c490e7.js";import{_ as y}from"./_plugin-vue_export-helper-c27b6911.js";import{V as I}from"./VContainer-24aec8ae.js";import{V as r}from"./VCol-b579b353.js";import{V as p}from"./VTextField-83b93000.js";import{V as n}from"./VRow-3f802a33.js";import{V as E,a as _}from"./VCard-4331e0a1.js";import{V as C}from"./VFileInput-7b278f7f.js";import{V as T}from"./VSelect-4a3dc8da.js";import{V as U}from"./VSwitch-f1c85895.js";import{V as v}from"./forwardRefs-b452bb48.js";import{R as L,r as A,o as m,c as f,w as a,a as t,b as c,t as g,e as B,g as h}from"./index-b7137ed4.js";import"./VTooltip-8fc5b1ea.js";import"./VOverlay-3da7fd39.js";import"./VField-3c3f03bd.js";import"./VTabs-77954cac.js";import"./ssrBoot-afe64649.js";import"./VChip-6dd36372.js";import"./VSpacer-172a79c9.js";import"./VDialog-4c1d75bb.js";import"./VMenu-45d141ca.js";import"./VCheckboxBtn-7d7bc7aa.js";const S={setup(){const{smAndUp:e}=L();return{smAndUp:e}},components:{Tiptap:b},data(){return{title:null,options:{content:"",supportImage:!0,supportVideo:!0},file:null,featuredImage:null,tags:null,category:null,publish:!0,saved:!1}},beforeRouteLeave(e,l,s){this.saved||confirm(this.$t("forum.QUIT_EDITING"))?s():s(!1)},methods:{save(){const e=this;let l={title:this.title,content:this.options.content,category:this.category,tags:this.tags,is_published:this.publish};this.featuredImage&&(l.image={id:this.featuredImage.id}),this.$axios({method:this.$api("WRITE_BLOG").method,url:this.$api("WRITE_BLOG").url,data:l}).then(function(s){e.saved=!0,e.$toast.success(e.$t("message.SAVED_SUCCESSFULLY")),e.$router.replace({name:"blogs"})}).catch(function(s){e.$toast.error(e.$error(s,"WRITE_BLOG"))})},imageUpload(e){var l=this;this.$axios({method:this.$api("FILE_UPLOAD").method,url:this.$api("FILE_UPLOAD").url,data:e}).then(function(s){l.featuredImage=s.data.data}).catch(function(s){l.$toast.error(l.$error(s,"FILE_UPLOAD"))})},handleFileChange(){if(this.file){let e=new FormData;e.append("file",this.file),this.imageUpload(e)}}}},D=["src","width","height"];function F(e,l,s,u,o,d){const V=A("Tiptap");return m(),f(I,null,{default:a(()=>[t(n,{class:"mt-0"},{default:a(()=>[t(r,null,{default:a(()=>[t(p,{modelValue:o.title,"onUpdate:modelValue":l[0]||(l[0]=i=>o.title=i),variant:"outlined",density:"compact",placeholder:e.$t("blog.TITLE")},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),t(n,{class:"mt-0"},{default:a(()=>[t(r,null,{default:a(()=>[t(V,{options:o.options},null,8,["options"])]),_:1})]),_:1}),t(n,null,{default:a(()=>[t(r,null,{default:a(()=>[t(E,{variant:"outlined",density:"compact",class:"rounded-lg border-dashed"},{default:a(()=>[t(_,{class:"text-body-1"},{default:a(()=>[c(g(e.$t("blog.FEATURED_IMAGE")),1)]),_:1}),t(C,{modelValue:o.file,"onUpdate:modelValue":l[1]||(l[1]=i=>o.file=i),density:"compact",accept:"image/*","prepend-icon":"","prepend-inner-icon":"mdi-camera",label:o.file?null:e.$t("tiptap.SELECT_IMAGE"),onChange:d.handleFileChange,"onClick:clear":l[2]||(l[2]=i=>o.featuredImage=null),"show-size":"",class:"mx-4"},null,8,["modelValue","label","onChange"]),o.featuredImage?(m(),B("img",{key:0,src:o.featuredImage.file,class:"ml-4 mr-10",width:u.smAndUp?240:120,height:u.smAndUp?240:120},null,8,D)):h("",!0)]),_:1})]),_:1})]),_:1}),t(n,{class:"mt-6"},{default:a(()=>[t(r,null,{default:a(()=>[t(p,{modelValue:o.tags,"onUpdate:modelValue":l[3]||(l[3]=i=>o.tags=i),variant:"outlined",density:"comfortable",placeholder:e.$t("hint.TAGS_HERE")},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),t(n,{class:"my-1"},{default:a(()=>[t(r,null,{default:a(()=>[e.$store.getBlogOption.category?(m(),f(T,{key:0,modelValue:o.category,"onUpdate:modelValue":l[4]||(l[4]=i=>o.category=i),variant:"outlined",density:"comfortable",label:e.$t("blog.CATEGORY"),items:e.$store.getBlogOption.category},null,8,["modelValue","label","items"])):h("",!0)]),_:1}),t(r,{class:"d-flex justify-center"},{default:a(()=>[t(U,{modelValue:o.publish,"onUpdate:modelValue":l[5]||(l[5]=i=>o.publish=i),color:"secondary",label:e.$t("blog.PUBLISH")},null,8,["modelValue","label"])]),_:1})]),_:1}),t(n,{class:"my-3"},{default:a(()=>[t(r,{class:"text-right"},{default:a(()=>[t(v,{color:"secondary",class:"px-8",onClick:d.save,disabled:!o.title||!o.options.content||!o.category},{default:a(()=>[c(g(e.$t("action.SAVE")),1)]),_:1},8,["onClick","disabled"])]),_:1})]),_:1})]),_:1})}const te=y(S,[["render",F]]);export{te as default};
