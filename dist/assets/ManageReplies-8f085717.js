import{N as v}from"./NumberPagination-a91fcdac.js";import{A}from"./ActiveSelector-394afd7c.js";import{u as I}from"./datetime-87f6df03.js";import{u as N}from"./user-12dc24db.js";import{r as h,o as m,c as p,w as n,a as t,b as d,t as l,V as b,d as o,e as E,f as D,F as k,af as U}from"./index-cd0f3d5b.js";import{_ as y}from"./_plugin-vue_export-helper-c27b6911.js";import{V as C}from"./VContainer-e9bae796.js";import{V as c}from"./VCol-aa336778.js";import{V as g}from"./VRow-9dd703d4.js";import{V as P,a as _}from"./VTabs-58df72cc.js";import{V as $}from"./VTextField-3cacdb26.js";import{V as w}from"./VTable-d95f7c4d.js";import{a as T,s as L}from"./forwardRefs-540210a6.js";import"./VSelect-ed41f246.js";import"./VMenu-9059ef23.js";import"./ssrBoot-8c3076c6.js";import"./VOverlay-891c21e4.js";import"./VField-ffd0fbb4.js";import"./VCheckboxBtn-de07382e.js";import"./VChip-85d324e4.js";const F={setup(){const{formatDateTime:r}=I(),{username:a}=N();return{formatDateTime:r,username:a}},components:{NumberPagination:v,ActiveSelector:A},data(){return{replies:[],pagination:null,pageSize:20,active:null,search:null,section:"replies",init:!1}},computed:{delete(){return this.active=="false"}},mounted(){this.getReplies()},methods:{getReplies(r=1){const a=this;let f="";this.search&&(f="&q="+this.search);let u="";this.active&&(u="&delete="+this.delete);let i=`${this.$api("ADMIN_REPLIES").url}?page_size=${this.pageSize}&page=${r}${u}${f}`;this.$axios({method:this.$api("ADMIN_REPLIES").method,url:i}).then(function(s){a.pagination=s.data.pagination,a.replies=s.data.data,a.init=!0}).catch(function(s){a.$toast.error(a.$error(s,"ADMIN_REPLIES"))})},onTabUpdate(){this.active=null,this.search=null,this.section=="threads"&&this.$router.push({name:"admin.threads"})},onEnter(){this.getReplies()}}};function M(r,a,f,u,i,s){const R=h("ActiveSelector"),V=h("router-link"),S=h("NumberPagination");return i.init?(m(),p(C,{key:0},{default:n(()=>[t(g,{style:{"border-bottom":"1px solid #DEE1E6FF"}},{default:n(()=>[t(c,{class:"text-h5 font-weight-bold py-2"},{default:n(()=>[d(l(r.$t("forum.REPLIES")),1)]),_:1})]),_:1}),t(g,{class:"py-2"},{default:n(()=>[t(c,null,{default:n(()=>[t(P,{modelValue:i.section,"onUpdate:modelValue":[a[0]||(a[0]=e=>i.section=e),s.onTabUpdate],density:"comfortable",color:"secondary"},{default:n(()=>[t(_,{value:"threads"},{default:n(()=>[d(l(r.$t("forum.THREADS")),1)]),_:1}),t(_,{value:"replies"},{default:n(()=>[d(l(r.$t("forum.REPLIES")),1)]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),t(c,null,{default:n(()=>[t($,{modelValue:i.search,"onUpdate:modelValue":a[1]||(a[1]=e=>i.search=e),variant:"outlined",density:"compact","hide-details":"","prepend-inner-icon":"mdi-magnify",placeholder:r.$t("hint.SEARCH_NAME_CONTENTS"),onKeydown:b(s.onEnter,["enter"])},null,8,["modelValue","placeholder","onKeydown"])]),_:1}),t(c,{cols:"2",class:"ml-1 pl-0 pr-3 hidden-sm-and-down"},{default:n(()=>[t(R,{modelValue:i.active,"onUpdate:modelValue":a[2]||(a[2]=e=>i.active=e),getItems:s.getReplies},null,8,["modelValue","getItems"])]),_:1})]),_:1}),t(g,null,{default:n(()=>[t(c,null,{default:n(()=>[t(w,{density:"comfortable",hover:!0},{default:n(()=>[o("thead",null,[o("tr",null,[o("th",null,l(r.$t("common.ID")),1),o("th",null,l(r.$t("forum.FORUM_NAME")),1),o("th",null,l(r.$t("forum.CONTENT")),1),o("th",null,l(r.$t("forum.THREAD_USER")),1),o("th",null,l(r.$t("forum.THREAD_TITLE")),1),o("th",null,l(r.$t("common.DATE_CREATED")),1),o("th",null,l(r.$t("common.ACTIVE")),1)])]),o("tbody",null,[(m(!0),E(k,null,D(i.replies,e=>(m(),E("tr",{key:e.id,style:U(e.is_deleted?{opacity:.5}:"")},[o("td",null,l(e.id),1),o("td",null,l(e.forum_name),1),o("td",null,[t(V,{to:{name:"thread.reply",params:{forum:e.forum_name,thread:e.thread.id,reply:e.id,title:e.thread.title.replace(/ /g,"_")}}},{default:n(()=>[d(l(e.content),1)]),_:2},1032,["to"])]),o("td",null,l(u.username(e)),1),o("td",null,[t(V,{to:{name:"thread.read",params:{forum:e.forum_name,thread:e.thread.id,title:e.thread.title.replace(/ /g,"_")}}},{default:n(()=>[d(l(e.thread.title),1)]),_:2},1032,["to"])]),o("td",null,l(u.formatDateTime(e.created_at)),1),o("td",null,[e.is_deleted?(m(),p(T,{key:1,icon:"mdi-close-circle-outline",color:"error"})):(m(),p(T,{key:0,icon:"mdi-check-circle-outline",color:"success"}))])],4))),128))])]),_:1})]),_:1})]),_:1}),t(S,{modelValue:i.pageSize,"onUpdate:modelValue":a[3]||(a[3]=e=>i.pageSize=e),pagination:i.pagination,getItems:s.getReplies},null,8,["modelValue","pagination","getItems"])]),_:1})):(m(),p(L,{key:1,indeterminate:"",height:4,color:"secondary"}))}const re=y(F,[["render",M]]);export{re as default};
